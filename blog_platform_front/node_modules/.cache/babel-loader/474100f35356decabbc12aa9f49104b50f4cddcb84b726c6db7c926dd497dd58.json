{"ast":null,"code":"var _jsxFileName = \"C:\\\\2025\\\\seguridad cloud\\\\ProyectoSecCloud1\\\\blog_platform_front\\\\src\\\\components\\\\MyPost.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport Post from './Post';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from './AuthContext';\nimport { makePostPrivate, makePostPublic, delete_post } from '../services/Api';\nimport EditPost from './EditPost';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction MyPost({\n  data,\n  onRefresh\n}) {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const navigate = useNavigate();\n  const [isPrivate, setIsPrivate] = useState(false);\n  const [buttonValues, setButtonValues] = useState([\"white\", \"black\", \"make private\"]);\n  useEffect(() => {\n    setIsPrivate(data.private);\n    if (isPrivate) {\n      setButtonValues([\"white\", \"black\", \"make public\"]);\n    } else {\n      setButtonValues([\"black\", \"white\", \"make private\"]);\n    }\n  }, [isPrivate, data]);\n  const handlePrivacy = async () => {\n    try {\n      if (isPrivate) {\n        await makePostPublic(data.id, user.access_token);\n        setIsPrivate(false);\n        setButtonValues([\"black\", \"white\", \"make private\"]);\n      } else {\n        await makePostPrivate(data.id, user.access_token);\n        setIsPrivate(true);\n        setButtonValues([\"white\", \"black\", \"make public\"]);\n      }\n      onRefresh();\n    } catch (error) {\n      console.error('Error changing privacy', error);\n      if (error.response.status === 401) {\n        navigate('/login');\n      }\n    }\n  };\n  const handleDelete = async () => {\n    try {\n      await delete_post(data.id, user.access_token);\n      onRefresh();\n    } catch (error) {\n      console.error('Error deleting post', error);\n      if (error.response.status === 401) {\n        navigate('/login');\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Post, {\n      data: data,\n      onRefresh: onRefresh\n    }, data.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => navigate(`/edit/${data.id}`),\n      children: \"Edit Post\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleDelete,\n      children: \"Delete Post\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handlePrivacy,\n      style: {\n        backgroundColor: buttonValues[0],\n        color: buttonValues[1]\n      },\n      children: buttonValues[2]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n}\n_s(MyPost, \"EQBcMmZ5Lw0lHnTFxogBJXc4spI=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = MyPost;\nexport default MyPost;\nvar _c;\n$RefreshReg$(_c, \"MyPost\");","map":{"version":3,"names":["useState","useEffect","Post","useNavigate","useAuth","makePostPrivate","makePostPublic","delete_post","EditPost","jsxDEV","_jsxDEV","MyPost","data","onRefresh","_s","user","navigate","isPrivate","setIsPrivate","buttonValues","setButtonValues","private","handlePrivacy","id","access_token","error","console","response","status","handleDelete","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","style","backgroundColor","color","_c","$RefreshReg$"],"sources":["C:/2025/seguridad cloud/ProyectoSecCloud1/blog_platform_front/src/components/MyPost.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport Post from './Post';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from './AuthContext';\r\nimport { makePostPrivate, makePostPublic, delete_post } from '../services/Api';\r\nimport EditPost from './EditPost';\r\n\r\nfunction MyPost({data, onRefresh}) {\r\n    const { user } = useAuth();\r\n    const navigate = useNavigate();\r\n    const [isPrivate, setIsPrivate] = useState(false);\r\n    const [buttonValues, setButtonValues] = useState([\"white\", \"black\", \"make private\"]);\r\n    useEffect(() => {\r\n        setIsPrivate(data.private);\r\n        if (isPrivate) {\r\n            setButtonValues([\"white\", \"black\", \"make public\"]);\r\n        }\r\n        else {\r\n            setButtonValues([\"black\", \"white\", \"make private\"]);\r\n        }\r\n    }, [isPrivate, data]);\r\n\r\n    const handlePrivacy = async () => {\r\n        try {\r\n            if (isPrivate) {\r\n                await makePostPublic(data.id, user.access_token);\r\n                setIsPrivate(false);\r\n                setButtonValues([\"black\", \"white\", \"make private\"]);\r\n            }\r\n            else {\r\n                await makePostPrivate(data.id, user.access_token);\r\n                setIsPrivate(true);\r\n                setButtonValues([\"white\", \"black\", \"make public\"]);\r\n            }\r\n            onRefresh();\r\n        }\r\n        catch (error) {\r\n            console.error('Error changing privacy', error);\r\n            if (error.response.status === 401) {\r\n                navigate('/login');\r\n            }\r\n        }\r\n    }\r\n\r\n    const handleDelete = async () => {\r\n        try {\r\n            await delete_post(data.id, user.access_token);\r\n            onRefresh();\r\n        }\r\n        catch (error) {\r\n            console.error('Error deleting post', error);\r\n            if (error.response.status === 401) {\r\n                navigate('/login');\r\n            }\r\n        }\r\n    }\r\n    \r\n    \r\n\r\n  return (\r\n    <div>\r\n      <Post key={data.id} data={data} onRefresh={onRefresh}/>\r\n      <button onClick={() => navigate(`/edit/${data.id}`)}>Edit Post</button>\r\n        <button onClick={handleDelete}>Delete Post</button>\r\n        <button onClick={handlePrivacy} style={{backgroundColor: buttonValues[0], color: buttonValues[1]}}>{buttonValues[2]}</button>\r\n    </div>\r\n  );\r\n\r\n}\r\n\r\nexport default MyPost;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}